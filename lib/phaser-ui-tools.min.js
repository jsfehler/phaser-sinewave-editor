/*! phaser-ui-tools 2018-03-23 */

var uiWidgets;(uiWidgets=uiWidgets||{}).utils={},uiWidgets.utils.modulo=function(t,i){"use strict";return(t%i+i)%i},uiWidgets.utils.operators={"+":function(t,i){return t+i},"-":function(t,i){return t-i}};var uiWidgets;(uiWidgets=uiWidgets||{}).Frame=function(t,i,s,e){"use strict";if(Phaser.Group.call(this,t),t.add.existing(this),this.x=i||0,this.y=s||0,this.game=t,this.bg=e||null,null!==e){var a=t.add.sprite(0,0,e);a.sendToBack(),a.alignIn(this,Phaser.TOP_LEFT)}},uiWidgets.Frame.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Frame.constructor=uiWidgets.Frame,uiWidgets.Frame.prototype.addNode=function(t,i,s,e){"use strict";i=i||this.alignment,s=s||0,e=e||0,this.add(t);var a=this.children[this.children.length-2];void 0!==a&&t.alignTo(a,i,s,e),"enableBarDrag"in t&&t.enableBarDrag()};var uiWidgets;(uiWidgets=uiWidgets||{}).Bar=function(){},uiWidgets.Bar.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Bar.constructor=uiWidgets.Bar,uiWidgets.Bar.prototype.setTrackScrollAreaSize=function(){"use strict";this.vertical?this.trackScrollAreaSize=this.track.height-this.vslice:this.trackScrollAreaSize=this.track.width-this.hslice},uiWidgets.Bar.prototype.centerStaticAxis=function(){"use strict";this.vertical?this.bar.x=this.track.x+this.track.width/2-this.bar.width/2:this.bar.y=this.track.y+this.track.height/2-this.bar.height/2},uiWidgets.DraggableBar=function(){},uiWidgets.DraggableBar.prototype=Object.create(uiWidgets.Bar.prototype),uiWidgets.DraggableBar.constructor=uiWidgets.DraggableBar,uiWidgets.DraggableBar.prototype.verticalTrackClick=function(){"use strict";this.game.input.mousePointer.y>this.bar.y+this.bar.height+this.worldPosition.y?this.scrollDown():this.game.input.mousePointer.y<this.bar.y+this.worldPosition.y&&this.scrollUp()},uiWidgets.DraggableBar.prototype.horizontalTrackClick=function(){"use strict";this.game.input.mousePointer.x>this.bar.x+this.bar.width+this.worldPosition.x?this.scrollRight():this.game.input.mousePointer.x<this.bar.x+this.worldPosition.x&&this.scrollLeft()},uiWidgets.DraggableBar.prototype.enableTrackClick=function(){"use strict";var t;this.track.inputEnabled=!0,t=this.vertical?this.verticalTrackClick:this.horizontalTrackClick,this.track.events.onInputDown.add(t,this)},uiWidgets.DraggableBar.prototype.enableBarInput=function(){"use strict";this.trackClicked=!1,this.barMoving=!1,this.bar.inputEnabled=!0},uiWidgets.DraggableBar.prototype.enableBarDrag=function(){"use strict";this.setDraggableArea(),this.bar.inputEnabled=!0,this.bar.input.enableDrag(),this.snapping&&this.bar.events.onInputUp.add(this.snapToClosestPosition,this),this.bar.events.onInputDown.add(this.saveMousePosition,this),this.bar.events.onDragUpdate.add(this.moveContent,this);var t;this.vertical?(this.bar.input.allowHorizontalDrag=!1,t=this.verticalDraggableArea):(this.bar.input.allowVerticalDrag=!1,t=this.horizontalDraggableArea),this.bar.input.boundsRect=new Phaser.Rectangle(t.x,t.y,t.w,t.h)};var uiWidgets;(uiWidgets=uiWidgets||{}).QuantityBar=function(t,i,s,e,a,r,h,o){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.game=t,this.x=i.x,this.y=i.y,this.valueRange=new uiWidgets.QuantityRange(this,s.startValue,s.maxValue),this.vertical=e||!1,this.reverse=a||!1,this.trackImage=r,this.barImage=h,this.tweenParams=o||{duration:300,ease:Phaser.Easing.Quadratic.Out},this.track=this.game.add.sprite(0,0,this.trackImage),this.add(this.track),this.bar=this.game.add.button(0,0,this.barImage,this.moveContent,this,1,0),this.add(this.bar),this.create()},uiWidgets.QuantityBar.prototype=Object.create(uiWidgets.Bar.prototype),uiWidgets.QuantityBar.constructor=uiWidgets.QuantityBar,uiWidgets.QuantityBar.prototype.setMask=function(){"use strict";null!==this.bar.mask&&(this.bar.mask.destroy(),this.bar.mask=null);var t=this.game.add.graphics(this.maskX,this.maskY);t.beginFill(255),t.drawRect(0,0,this.maskW,this.maskH),this.bar.mask=t,this.add(t)},uiWidgets.QuantityBar.prototype.getBarPosition=function(){"use strict";var t=this.valueRange.getRatio()/this.windowScrollAreaSize;return this.trackScrollAreaSize*t},uiWidgets.QuantityBar.prototype.create=function(){"use strict";this.centerStaticAxis(),this.maskW=this.bar.width,this.maskH=this.bar.height,this.maskX=this.bar.x,this.maskY=this.bar.y,this.vertical?this.maskH=this.getBarSize():this.maskW=this.getBarSize(),this.reverse&&(this.vertical?this.maskY=this.getBarFraction():this.maskX=this.getBarFraction()),this.setMask(),this.windowScrollAreaSize=this.valueRange.maxValue,this.vslice=this.track.height*this.valueRange.getRatio(),this.hslice=this.track.width*this.valueRange.getRatio(),this.setTrackScrollAreaSize()},uiWidgets.QuantityBar.prototype.addScrollTweenMask=function(t){"use strict";this.game.add.tween(this.bar.mask).to(t,this.tweenParams.duration,this.tweenParams.ease,!0)},uiWidgets.QuantityBar.prototype.adjustBar=function(t){"use strict";this.valueRange.currentValue+=t;var i,s=this.getBarSize();i=this.reverse?this.vertical?{height:s,y:this.getBarFraction()}:{width:s,x:this.getBarFraction()}:this.vertical?{height:s}:{width:s},this.addScrollTweenMask(i)},uiWidgets.QuantityBar.prototype.getBarFraction=function(){"use strict";return this.vertical?this.track.height*this.valueRange.getRatio():this.track.width*this.valueRange.getRatio()},uiWidgets.QuantityBar.prototype.getBarSize=function(){"use strict";return this.reverse?this.vertical?this.track.height-this.valueRange.getRatio():this.track.width-this.valueRange.getRatio():this.getBarFraction()};var uiWidgets;(uiWidgets=uiWidgets||{}).QuantityRange=function(t,i,s){"use strict";this.bar=t,this.startValue=i,this.maxValue=s,this.currentValue=i},uiWidgets.QuantityRange.prototype.getRatio=function(){"use strict";return this.currentValue/this.maxValue},uiWidgets.QuantityRange.prototype.getCurrentValue=function(){"use strict";return this.currentValue},uiWidgets.ValueRange=function(t,i,s){"use strict";this.step=t,this.startValue=i,this.maxValue=s+t,this.ratio=t/s,this.ratio>1&&(this.ratio=1),this.currentValue=i,this.steps=[];for(var e=0;e<this.maxValue;e+=t)this.steps.push(e)},uiWidgets.ValueRange.prototype.adjustValue=function(t){"use strict";this.currentValue=t},uiWidgets.ValueRange.prototype.getCurrentValue=function(){"use strict";return this.currentValue},uiWidgets.ViewportRange=function(t,i){"use strict";this.viewport=t,this.vertical=i,i?(this.step=t.area.height,this.maxValue=t.height):(this.step=t.area.width,this.maxValue=t.width),this.ratio=this.step/this.maxValue,this.ratio>1&&(this.ratio=1)},uiWidgets.ViewportRange.prototype.adjustValue=function(t){"use strict";this.vertical?this.viewport.y=t+this.viewport.area.y:this.viewport.x=t+this.viewport.area.x,this.viewport.disableOutOfBounds(this.viewport.children,this,this.vertical)},uiWidgets.ViewportRange.prototype.getCurrentValue=function(){"use strict";return this.vertical?this.viewport.y-this.viewport.area.y:this.viewport.x-this.viewport.area.x};var uiWidgets;(uiWidgets=uiWidgets||{}).Scrollbar=function(t,i,s,e,a,r,h){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.game=t,this.content=i,this.valueRange=new uiWidgets.ViewportRange(i,e),this.vertical=e||!1,this.draggable=s||!1,this.trackImage=a,this.barImage=r,this.minBarSize=44,this.tweenParams=h||{duration:300,ease:Phaser.Easing.Quadratic.Out},this.trackClicked=!1,this.barMoving=!1,this.mousePointer=null,this.track=this.game.add.sprite(0,0,this.trackImage),this.add(this.track),this.draggable&&this.enableTrackClick(),this.bar=this.game.add.button(this.x,this.y,this.barImage,this.moveContent,this,1,0),this.add(this.bar),this.resizeBar(),this.minY=this.track.y,this.maxY=this.track.y+this.track.height-this.bar.height,this.minX=this.track.x,this.maxX=this.track.x+this.track.width-this.bar.width,this.create(),this.onMovement=new Phaser.Signal},uiWidgets.Scrollbar.prototype=Object.create(uiWidgets.DraggableBar.prototype),uiWidgets.Scrollbar.constructor=uiWidgets.Scrollbar,uiWidgets.Scrollbar.prototype.setDraggableArea=function(){"use strict";this.verticalDraggableArea={x:this.track.x-(this.bar.width-this.track.width)/2,y:this.track.y,w:this.bar.width,h:this.track.height},this.horizontalDraggableArea={x:this.track.x,y:this.track.y-(this.bar.height-this.track.height)/2,w:this.track.width,h:this.bar.height}},uiWidgets.Scrollbar.prototype.resizeBar=function(){"use strict";var t;(t=this.vertical?this.track.height*this.valueRange.ratio:this.track.width*this.valueRange.ratio)<this.minBarSize&&(t=this.minBarSize),this.vertical?this.bar.height=t:this.bar.width=t},uiWidgets.Scrollbar.prototype.create=function(){"use strict";this.centerStaticAxis(),this.draggable&&this.enableBarDrag(),this.windowScrollAreaSize=this.valueRange.maxValue-this.valueRange.step,this.vslice=this.track.height*this.valueRange.ratio,this.hslice=this.track.width*this.valueRange.ratio,this.setTrackScrollAreaSize(),this.mousePointer={x:this.bar.x,y:this.bar.y},this.setInitialBarPosition()},uiWidgets.Scrollbar.prototype.setInitialBarPosition=function(){"use strict";var t=this.getBarPosition();this.vertical?this.bar.y=t+this.track.y:this.bar.x=t+this.track.x},uiWidgets.Scrollbar.prototype.addScrollTween=function(t){"use strict";this.mousePointer={x:this.bar.x,y:this.bar.y},this.trackClicked=!0;var i;i=this.game.add.tween(this.bar).to(t,this.tweenParams.duration,this.tweenParams.ease,!0),this.addScrollTweenEvents(i)},uiWidgets.Scrollbar.prototype.addScrollTweenEvents=function(t){"use strict";t.onUpdateCallback(this.moveContent,this),t.onComplete.add(this.enableBarInput,this)},uiWidgets.Scrollbar.prototype.scrollUp=function(){"use strict";if(this.bar.y!==this.track.y&&!this.barMoving){var t=this.bar.y-this.vslice,i=null;this.barMoving=!0,i=t<=this.track.y?this.minY:this.bar.y-this.vslice,this.addScrollTween({y:i})}},uiWidgets.Scrollbar.prototype.scrollDown=function(){"use strict";if(this.bar.y+this.bar.height!==this.track.y+this.track.height&&!this.barMoving){var t=this.bar.y+2*this.vslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t>=this.track.y+this.track.height?this.maxY:this.bar.y+this.vslice,this.addScrollTween({y:i})}},uiWidgets.Scrollbar.prototype.scrollLeft=function(){"use strict";if(this.bar.x!==this.track.x&&!this.barMoving){var t=this.bar.x-this.hslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t<=this.track.x?this.minX:this.bar.x-this.hslice,this.addScrollTween({x:i})}},uiWidgets.Scrollbar.prototype.scrollRight=function(){"use strict";if(this.bar.x+this.bar.width!==this.track.x+this.track.width&&!this.barMoving){var t=this.bar.x+2*this.hslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t>=this.track.x+this.track.width?this.maxX:this.bar.x+this.hslice,this.addScrollTween({x:i})}},uiWidgets.Scrollbar.prototype.saveMousePosition=function(t,i){"use strict";this.mousePointer={x:i.x,y:i.y}},uiWidgets.Scrollbar.prototype.getBarPosition=function(){"use strict";var t=this.valueRange.getCurrentValue()/this.windowScrollAreaSize;return this.trackScrollAreaSize*t},uiWidgets.Scrollbar.prototype.getMouseDelta=function(){"use strict";var t,i,s,e;return t=this.vertical?this.mousePointer.y:this.mousePointer.x,s=this.trackClicked?{x:this.bar.x,y:this.bar.y}:{x:this.game.input.mousePointer.x,y:this.game.input.mousePointer.y},i=this.vertical?s.y:s.x,this.mousePointer=s,e=this.vertical?this.track.height+this.worldPosition.y:this.track.width+this.worldPosition.x,i<e?t-i:0},uiWidgets.Scrollbar.prototype.getGripPositionRatio=function(){"use strict";var t=this.getBarPosition()+this.getMouseDelta();t>0?t=0:t<=-this.trackScrollAreaSize&&(t=-this.trackScrollAreaSize),this.vertical?this.bar.y<=this.track.y?t=0:this.bar.y+this.bar.height>=this.track.y+this.track.height&&(t=-this.trackScrollAreaSize):this.bar.x<=this.track.x?t=0:this.bar.x+this.bar.width>=this.track.x+this.track.width&&(t=-this.trackScrollAreaSize);var i=t/this.trackScrollAreaSize;return isNaN(i)&&(i=0),i},uiWidgets.Scrollbar.prototype.moveContent=function(){"use strict";var t=this.getGripPositionRatio()*this.windowScrollAreaSize;this.valueRange.adjustValue(t),this.onMovement.dispatch(this)};var uiWidgets;(uiWidgets=uiWidgets||{}).ValueBar=function(t,i,s,e,a,r,h,o){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.game=t,this.x=i.x,this.y=i.y,this.valueRange=new uiWidgets.ValueRange(s.step,s.startValue,s.maxValue),this.vertical=a||!1,this.draggable=e||!1,this.trackImage=r,this.barImage=h,this.tweenParams=o||{duration:300,ease:Phaser.Easing.Quadratic.Out},this.trackClicked=!1,this.barMoving=!1,this.mousePointer=null,this.track=this.game.add.sprite(0,0,this.trackImage),this.add(this.track),this.draggable&&this.enableTrackClick(),this.bar=this.game.add.button(this.x,this.y,this.barImage,this.moveContent,this,1,0),this.bg=this.game.add.graphics(0,0),this.add(this.bg),this.sendToBack(this.bg),this.bg.beginFill(16711680,0),this.vertical?this.bg.drawRect(0,0-this.bar.height/2,1,this.track.height+this.bar.height):this.bg.drawRect(0-this.bar.width/2,0,this.track.width+this.bar.width,1),this.bg.endFill(),this.snapping=!0,this.add(this.bar),this.minY=this.track.y-this.bar.height/2,this.maxY=this.track.y+this.track.height-this.bar.height/2,this.minX=this.track.x-this.bar.width/2,this.maxX=this.track.x+this.track.width-this.bar.width/2,this.create(),this.vertical?(this.upEvent=this.scrollUp,this.downEvent=this.scrollDown):(this.upEvent=this.scrollLeft,this.downEvent=this.scrollRight),this.onMovement=new Phaser.Signal},uiWidgets.ValueBar.prototype=Object.create(uiWidgets.Scrollbar.prototype),uiWidgets.ValueBar.constructor=uiWidgets.ValueBar,uiWidgets.ValueBar.prototype.setDraggableArea=function(){"use strict";this.verticalDraggableArea={x:this.track.x-(this.bar.width-this.track.width)/2,y:this.track.y-this.bar.height/2,w:this.bar.width,h:this.track.height+this.bar.height},this.horizontalDraggableArea={x:this.track.x-this.bar.width/2,y:this.track.y-(this.bar.height-this.track.height)/2,w:this.track.width+this.bar.width,h:this.bar.height}},uiWidgets.ValueBar.prototype.setTrackScrollAreaSize=function(){"use strict";this.vertical?this.trackScrollAreaSize=this.track.height:this.trackScrollAreaSize=this.track.width},uiWidgets.ValueBar.prototype.setInitialBarPosition=function(){"use strict";var t=this.getBarPosition();this.vertical?this.bar.y=t+this.track.y-this.bar.height/2:this.bar.x=t+this.track.x-this.bar.width/2},uiWidgets.ValueBar.prototype.getClosestPosition=function(){"use strict";for(var t=this.valueRange.getCurrentValue(),i=Math.abs(t-this.valueRange.steps[0]),s=this.valueRange.steps[0],e=0;e<this.valueRange.steps.length;e++){var a=Math.abs(t-this.valueRange.steps[e]);a<i&&(i=a,s=this.valueRange.steps[e])}return s},uiWidgets.ValueBar.prototype.snapToClosestPosition=function(){"use strict";var t=this.getClosestPosition();this.valueRange.adjustValue(t),this.moveContent(),this.setInitialBarPosition()},uiWidgets.ValueBar.prototype.addScrollTweenEvents=function(t){"use strict";t.onComplete.add(this.moveContent,this),t.onComplete.add(this.enableBarInput,this)},uiWidgets.ValueBar.prototype.getGripPositionRatio=function(){"use strict";var t=this.getBarPosition()-this.getMouseDelta();t<0?t=0:t>=this.trackScrollAreaSize&&(t=this.trackScrollAreaSize),this.vertical?this.bar.y<=this.track.y?t=0:this.bar.y+this.bar.height>=this.track.y+this.track.height&&(t=this.trackScrollAreaSize):this.bar.x<=this.track.x?t=0:this.bar.x+this.bar.width>=this.track.x+this.track.width&&(t=this.trackScrollAreaSize);var i=t/this.trackScrollAreaSize;return isNaN(i)&&(i=0),i};var uiWidgets;(uiWidgets=uiWidgets||{}).textSprite=function(t,i,s,e,a,r){"use strict";Phaser.Sprite.call(this,t,a,r,i),t.add.existing(this),this.text=this.game.add.text(0,0,s,e),this.text.anchor.set(.5,.5),this.addChild(this.text)},uiWidgets.textSprite.prototype=Object.create(Phaser.Sprite.prototype),uiWidgets.textSprite.constructor=uiWidgets.textSprite,uiWidgets.textButton=function(t,i,s,e,a,r,h,o){"use strict";Phaser.Button.call(this,t,a,r,i,h,o),t.add.existing(this),this.text=this.game.add.text(0,0,s,e),this.text.anchor.set(.5,.5),this.addChild(this.text)},uiWidgets.textButton.prototype=Object.create(Phaser.Button.prototype),uiWidgets.textButton.constructor=uiWidgets.textButton;var uiWidgets;(uiWidgets=uiWidgets||{}).Column=function(t,i,s,e){"use strict";uiWidgets.Frame.apply(this,arguments)},uiWidgets.Column.prototype=Object.create(uiWidgets.Frame.prototype),uiWidgets.Column.constructor=uiWidgets.Column,uiWidgets.Column.prototype.alignment=Phaser.BOTTOM_CENTER;var uiWidgets;(uiWidgets=uiWidgets||{}).Row=function(t,i,s,e){"use strict";uiWidgets.Frame.apply(this,arguments)},uiWidgets.Row.prototype=Object.create(uiWidgets.Frame.prototype),uiWidgets.Row.constructor=uiWidgets.Row,uiWidgets.Row.prototype.alignment=Phaser.RIGHT_CENTER;var uiWidgets;(uiWidgets=uiWidgets||{}).Viewport=function(t,i,s,e,a){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.x=i,this.y=s,this.area={x:i,y:s,width:e,height:a},this.mask=this.game.add.graphics(this.area.x,this.area.y),this.mask.beginFill(255),this.mask.drawRect(0,0,e,a),this.mask.endFill()},uiWidgets.Viewport.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Viewport.constructor=uiWidgets.Viewport,uiWidgets.Viewport.prototype.addNode=function(t){"use strict";this.add(t)},uiWidgets.Viewport.prototype.disableOutOfBounds=function(t,i,s){"use strict";var e,a,r,h;if(void 0!==t)for(var o=0;o<t.length;o++)(e=t[o]).inputEnabled=!0,h=e.world||e,s?(a=h.y,r=i.viewport.area.y):(a=h.x,r=i.viewport.area.x),a<r&&(e.inputEnabled=!1),this.disableOutOfBounds(e.children,i,s)};var uiWidgets;(uiWidgets=uiWidgets||{}).KeyboardGroup=function(t,i,s){"use strict";this.game=t,this.vertical=i||!1,this.callbackContext=s,this.children=[],this.selected=null,this.idx=0,this.upKey=this.game.input.keyboard.addKey(Phaser.Keyboard.UP),this.downKey=this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.leftKey=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightKey=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.upEvent=this.prevItem,this.downEvent=this.nextItem,this.onPrevious=new Phaser.Signal,this.onNext=new Phaser.Signal,this.activateGroup()},uiWidgets.KeyboardGroup.constructor=uiWidgets.KeyboardGroup,uiWidgets.KeyboardGroup.prototype.addNode=function(t){"use strict";this.children.push(t),this.selected=this.children[0],this.useBar()},uiWidgets.KeyboardGroup.prototype.prevItem=function(){"use strict";this.idx=this.idx-1,this.idx<0&&(this.idx=this.children.length-1),this.selected=this.children[this.idx],this.useBar(),this.onPrevious.dispatch(this,this.callbackContext)},uiWidgets.KeyboardGroup.prototype.nextItem=function(){"use strict";this.idx=(this.idx+1)%this.children.length,this.selected=this.children[this.idx],this.useBar(),this.onNext.dispatch(this,this.callbackContext)},uiWidgets.KeyboardGroup.prototype.activateGroup=function(){"use strict";this.vertical?(this.upKey.onDown.add(this.upEvent,this),this.downKey.onDown.add(this.downEvent,this)):(this.leftKey.onDown.add(this.upEvent,this),this.rightKey.onDown.add(this.downEvent,this))},uiWidgets.KeyboardGroup.prototype.useBar=function(){"use strict";this.vertical?(this.leftKey.onDown.removeAll(),this.rightKey.onDown.removeAll(),this.leftKey.onDown.add(this.selected.upEvent,this.selected),this.rightKey.onDown.add(this.selected.downEvent,this.selected)):(this.upKey.onDown.removeAll(),this.downKey.onDown.removeAll(),this.upKey.onDown.add(this.selected.upEvent,this.selected),this.downKey.onDown.add(this.selected.downEvent,this.selected))};var uiWidgets;uiWidgets=uiWidgets||{};var VectorPoint=function(t,i,s,e,a){"use strict";this.x=t||0,this.y=i||0,this.z=s||0,this.sprite=e||null,this.position=a||0};VectorPoint.prototype={getSinCosOfAngle:function(t){"use strict";var i=t*Math.PI/180;return{cosine:Math.cos(i),sine:Math.sin(i)}},rotateY:function(t){"use strict";var i=this.getSinCosOfAngle(t),s=this.z*i.cosine-this.x*i.sine,e=this.z*i.sine+this.x*i.cosine;return new VectorPoint(e,this.y,s)},rotateX:function(t){"use strict";var i=this.getSinCosOfAngle(t),s=this.y*i.cosine-this.z*i.sine,e=this.y*i.sine+this.z*i.cosine;return new VectorPoint(this.x,s,e)},rotateZ:function(t){"use strict";var i=this.getSinCosOfAngle(t),s=this.x*i.cosine-this.y*i.sine,e=this.x*i.sine+this.y*i.cosine;return new VectorPoint(s,e,this.z)},rotate:function(t,i){"use strict";return"x"===t?this.rotateX(i):"y"===t?this.rotateY(i):"z"===t?this.rotateZ(i):void 0},project:function(t,i,s){"use strict";var e=this.x*s+t,a=-this.y*s+i;return new VectorPoint(e,a,this.z)}},uiWidgets.Wheel3D=function(t,i,s,e,a,r,h,o,n){"use strict";this.game=t,this.xy=i,this.sprites=s,this.firstPlace=e,this.zoom=a,this.axis=r,this.rotationAxis=h,this.visibleRange=o||null,this.tweenParams=n||{duration:300,ease:Phaser.Easing.Quadratic.Out},this.onStart=new Phaser.Signal,this.onComplete=new Phaser.Signal,this.onBackComplete=new Phaser.Signal,this.onForwardComplete=new Phaser.Signal,this.group=this.game.add.group()},uiWidgets.Wheel3D.prototype={activate:function(){"use strict";var t,i,s,e,a,r,h,o;if(this.pointsAmount=this.sprites.length,this.totalPositions=this.pointsAmount-1,this.rotationAmount=360/this.pointsAmount,null!==this.visibleRange){var n=[];for(o=0;o<=this.totalPositions;o++)n.push(o);var u=n.slice(0,this.visibleRange.max),c=n.slice(this.visibleRange.min);this.visiblePositions=u.concat(c)}for(this.moving=!1,this.direction=null,this.wheelItems=[],1,t=2*Math.PI/this.pointsAmount,o=0;o<this.pointsAmount;o++)this.sprites[o].wheelPosition=o,this.group.add(this.sprites[o]),i=t*o,s=1*Math.cos(i),e=1*Math.sin(i),"x"===this.axis?(a=-1,r=s,h=e):"y"===this.axis?(a=s,r=-1,h=e):"z"===this.axis&&(a=s,r=e,h=-1),this.wheelItems.push(new VectorPoint(a,r,h,this.sprites[o],o));this.active=this.wheelItems[this.firstPlace].sprite,this.project()},moveBack:function(){"use strict";!1===this.moving&&(this.moving=!0,this.direction=0,"x"===this.axis||"z"===this.axis?this.rotationAxis[this.axis]+=this.rotationAmount:this.rotationAxis[this.axis]-=this.rotationAmount,this.updatePosition("+"),this.project(),this.resetAngle())},moveForward:function(){"use strict";!1===this.moving&&(this.moving=!0,this.direction=1,"x"===this.axis||"z"===this.axis?this.rotationAxis[this.axis]-=this.rotationAmount:this.rotationAxis[this.axis]+=this.rotationAmount,this.updatePosition("-"),this.project(),this.resetAngle())},project:function(){"use strict";var t,i,s=["x","y","z"],e=s.indexOf(this.axis);s.splice(e,1);for(var a=0;a<this.wheelItems.length;a++){var r=this.wheelItems[a].rotate(this.axis,this.rotationAxis[this.axis]).rotate(s[0],this.rotationAxis[s[0]]).rotate(s[1],this.rotationAxis[s[1]]).project(this.xy.x,this.xy.y,this.zoom);if(t=this.wheelItems[a].sprite,t.lz=r.z,this.wheelItems[a].position===this.firstPlace)t.alpha=1,this.active=this.wheelItems[a].sprite;else if(null!==this.visibleRange){var h=_.includes(this.visiblePositions,this.wheelItems[a].position);t.alpha=h?1:0}(i=this.game.add.tween(t).to({x:r.x,y:r.y},this.tweenParams.duration,this.tweenParams.ease,!0)).onComplete.add(this.enableMoving,this)}this.group.sort("lz",Phaser.Group.SORT_ASCENDING),i.onStart.add(this.dispatchOnStart,this),i.onComplete.add(this.dispatchOnComplete,this)},dispatchOnStart:function(){"use strict";this.onStart.dispatch(this)},dispatchOnComplete:function(){"use strict";0===this.direction?this.onBackComplete.dispatch(this):1===this.direction&&this.onForwardComplete.dispatch(this),this.onComplete.dispatch(this)},enableMoving:function(){"use strict";this.moving=!1},updatePosition:function(t){"use strict";for(var i,s=0;s<this.wheelItems.length;s++){var e=this.wheelItems[s].position;this.wheelItems[s].position=uiWidgets.utils.operators[t](e,1),i=uiWidgets.utils.modulo(this.wheelItems[s].position,this.pointsAmount),this.wheelItems[s].position=i,this.wheelItems[s].sprite.wheelPosition=i}},resetAngle:function(){"use strict";var t=this.rotationAxis[this.axis];360!==t&&-360!==t||(this.rotationAxis[this.axis]=0)}};